技术待学习备忘
# guava
## SettableFuture
当缓存中没有要找的数据时，则要从数据库中去查询，而当并发量比较大时可能会击穿数据库，所以guava cache对同一值的查询做了合并请求的处理。其中就用到了SettableFuture，类似一把锁，只会让一个请求线程去查询数据库而其他查询请求线程（查询同一个值）会处于等待状态。

## ListenableFuture
相比FutureTask，本质上只是增加了任务的回调函数

# 线程池
[ThreadPoolExecutor源码]( https://www.cnblogs.com/wbo112/p/15548275.html)
```
    //runState，workerCount这两个变量是不存在的，runState和workerCount两个变量一起组成了ctl
    //前面3位表示runState，后面29位表示workerCount
    //所以我们也可以认为runState，workerCount是存在的
```
[线程池的三种队列区别：SynchronousQueue、LinkedBlockingQueue 和ArrayBlockingQueue](https://blog.csdn.net/qq_26881739/article/details/80983495)

# guava异步请求
场景：加载多个key:key1,key2,key3
- 采用cacheLoader，每个只加载一次。但key1,key2,key3串行加载。
- 不同key不同线程改并行异步，但同一个key会从重复加载。

# 互联网套路
反向索引：比如一个促销有多个商品，通过商品查促销，就需要反向索引；